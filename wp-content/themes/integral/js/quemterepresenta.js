var RequestInformations,cBtnCity,cBtnFiltro,cBusca,cPnlCities,mataCheckbox,requester,viewObject;RequestInformations=function(){function e(e,t){this.viewObject=e,this.quantidadePagina=t,this.pQuery=null}return e.prototype.downloadAllData=function(){return this.viewObject.updateFormFieldsForDownload(this.pQuery),jQuery("#download-files").submit()},e.prototype._queryPoliticiansInfo=function(e,t){return this.viewObject.startSearch(),jQuery.ajax({url:"/api/v1/politicos.php",data:JSON.stringify({ids_politicos:t,pagina:e}),dataType:"json",contentType:"application/json; charset=utf-8",type:"post",complete:function(){return this.viewObject.completeSearch()}.bind(this),success:function(e){if(e.dados.length>0)return this.viewObject.redrawPoliticians(e.pagina,e.dados)}.bind(this)})},e.prototype._createRequestQuery=function(){var e,t,i,a,r,c,n;if(this.pQuery={},(i=jQuery(".chk-estado:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.sigla_estado=i),(e=jQuery(".chk-cidade:checked").map(function(e,t){return jQuery(t).attr("cid_id")}).toArray()).length>0&&(this.pQuery.id_cidade=e),(r=jQuery(".chk-partido:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.id_partido=r),(c=jQuery(".chk-pauta:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.pautas=c),(a=jQuery(".chk-genero:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.genero=a),(t=jQuery(".chk-cor:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.cor_tse=t),(n=jQuery(".chk-sit-eleit:checked").map(function(e,t){return t.value}).toArray()).length>0)return this.pQuery.situacao_eleitoral=n},e.prototype.queryNewInfo=function(){return this._createRequestQuery(),this.viewObject.startSearch(),jQuery.ajax({url:"/api/v1/indices.php",data:JSON.stringify({query:this.pQuery,limites:{quantidade:this.quantidadePagina}}),dataType:"json",contentType:"application/json; charset=utf-8",type:"post",complete:function(){return this.viewObject.completeSearch()}.bind(this),success:function(e){return this.viewObject.reformatScreen(),e.data&&e.data.length>0?(this.viewObject.desenhaDadosFiltrados(e,this.downloadAllData.bind(this),this._queryPoliticiansInfo.bind(this)),void 0!==e.filter_data&&(this.viewObject.atualizaFiltros(e.filter_data),this.viewObject.marcaFiltro(e.query),this.pQuery=e.query)):this.viewObject.desenhaDadosFiltradosVazio(""),this.viewObject.scrollToTop()}.bind(this)})},e}(),(viewObject=new ViewObject(siteUrl)).criaFuncoesDesmarque(),requester=new RequestInformations(viewObject,12),jQuery("#bt_filtro").on("click",function(){return requester.queryNewInfo()}),cBusca=jQuery("#filtro-cidade-escolha"),cBtnCity=jQuery("#btn-add-city"),cBtnFiltro=jQuery("#bt_filtro"),cPnlCities=jQuery("#cidades-escolhidas"),cBtnCity.prop("disabled",!0),cBusca.autocomplete({source:function(e,t){var i;return i=function(){var t;return t={nome:e.term},requester.pQuery&&void 0!==requester.pQuery.pautas&&(t.pautas=query.pautas.join(",")),t},jQuery.ajax({url:"/api/v1/cidades.php",method:"get",accept:"application/json",contentType:"application/json; charset=utf-8",dataType:"json",data:i(),success:function(e){return t(e.map(function(e){return{label:e.nome_cidade+", "+e.uf,value:e.id}}))}})},minLength:2,focus:function(e,t){return!1},change:function(e,t){var i;return t.item&&(i=jQuery("<label>",{text:t.item.label}).appendTo(cPnlCities),jQuery("<input>",{type:"checkbox",checked:"checked",cid_id:t.item.value,class:"chk-cidade"}).appendTo(i).on("click",mataCheckbox)),cBusca.val(""),!1},select:function(e,t){return cBusca.val(t.item.label),cBusca.prop("cid_id",t.item.value),cBtnCity.prop("disabled",!1),!1}}),mataCheckbox=function(e){return jQuery(e.currentTarget).parent().remove()},cBtnCity.on("click",function(){var e;return e=jQuery("<label>",{text:cBusca.val()}).appendTo(cPnlCities),jQuery("<input>",{type:"checkbox",checked:"checked",cid_id:cBusca.prop("cid_id"),class:"chk-cidade"}).appendTo(e).on("click",mataCheckbox),cBusca.prop("cid_id",null),cBusca.val(""),cBtnCity.prop("disabled",!0)});