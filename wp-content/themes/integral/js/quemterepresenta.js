var RequestInformations,requester,viewObject;RequestInformations=function(){function e(e,t){this.viewObject=e,this.quantidadePagina=t,this.pQuery=null}return e.prototype.downloadAllData=function(){return this.viewObject.updateFormFieldsForDownload(this.pQuery),jQuery("#download-files").submit()},e.prototype._queryPoliticiansInfo=function(e,t){return this.viewObject.startSearch(),jQuery.ajax({url:"/api/v1/politicos.php",data:JSON.stringify({ids_politicos:t,pagina:e}),dataType:"json",contentType:"application/json; charset=utf-8",type:"post",complete:function(){return this.viewObject.completeSearch()}.bind(this),success:function(e){if(e.dados.length>0)return this.viewObject.redrawPoliticians(e.pagina,e.dados)}.bind(this)})},e.prototype._createRequestQuery=function(){var e,t,i,r,a,n,u;if(this.pQuery={},(i=jQuery(".chk-estado:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.sigla_estado=i),(e=jQuery(".chk-cidade:checked").map(function(e,t){return jQuery(t).attr("cid_id")}).toArray()).length>0&&(this.pQuery.id_cidade=e),(a=jQuery(".chk-partido:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.id_partido=a),(n=jQuery(".chk-pauta:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.pautas=n),(r=jQuery(".chk-genero:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.genero=r),(t=jQuery(".chk-cor:checked").map(function(e,t){return t.value}).toArray()).length>0&&(this.pQuery.cor_tse=t),(u=jQuery(".chk-sit-eleit:checked").map(function(e,t){return t.value}).toArray()).length>0)return this.pQuery.situacao_eleitoral=u},e.prototype.queryNewInfo=function(){return this._createRequestQuery(),this.viewObject.startSearch(),jQuery.ajax({url:"/api/v1/indices.php",data:JSON.stringify({query:this.pQuery,limites:{quantidade:this.quantidadePagina}}),dataType:"json",contentType:"application/json; charset=utf-8",type:"post",complete:function(){return this.viewObject.completeSearch()}.bind(this),success:function(e){return this.viewObject.reformatScreen(),e.data&&e.data.length>0?(this.viewObject.desenhaDadosFiltrados(e,this.downloadAllData.bind(this),this._queryPoliticiansInfo.bind(this)),void 0!==e.filter_data&&(this.viewObject.atualizaFiltros(e.filter_data),this.viewObject.marcaFiltro(e.query),this.pQuery=e.query)):this.viewObject.desenhaDadosFiltradosVazio(""),this.viewObject.scrollToTop()}.bind(this)})},e.prototype.buscaDadosCidade=function(e,t){var i;return i=function(){var t;return t={nome:e},this.pQuery&&void 0!==this.pQuery.pautas&&(t.pautas=this.pQuery.pautas.join(",")),t},jQuery.ajax({url:"/api/v1/cidades.php",method:"get",accept:"application/json",contentType:"application/json; charset=utf-8",dataType:"json",data:i(),success:t})},e}(),viewObject=new ViewObject(siteUrl),requester=new RequestInformations(viewObject,12),viewObject.criaFuncoesDesmarque(),viewObject.configuraAutoComplete(function(e,t){return requester.buscaDadosCidade(e.term,function(e){return t(e.map(function(e){return{label:e.nome_cidade+", "+e.uf,value:e.id}}))})}),viewObject.configuraBotaoFiltro(function(){return requester.queryNewInfo()});