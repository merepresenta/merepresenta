var ViewObject;ViewObject=function(){function e(e){this.siteUrl=e,this.pDadosFiltrados=jQuery("#dados_filtrados"),this.pUf=jQuery("#filtro_estado"),this.pPartidos=jQuery("#filtro_partido"),this.pGeneros=jQuery("#filtro_genero"),this.pCores=jQuery("#filtro_cor"),this.pSituacoes=jQuery("#filtro_sit_eleitoral")}return e.prototype.desenhaDadosFiltradosVazio=function(e){var t;return t=jQuery("<h3>",{text:e}),this.pDadosFiltrados.html(t)},e.prototype._desenhaTabelaDados=function(e){var t,a;return a='<div class="row">',t=1,jQuery(e).each(function(e,r){var o,i;return o="",i="",null!=r.situacao_eleitoral&&(o="eleito por média"===r.situacao_eleitoral.toLowerCase()||"eleito por qp"===r.situacao_eleitoral.toLowerCase()?" eleito":"",i="eleito por média"===r.situacao_eleitoral.toLowerCase()||"eleito por qp"===r.situacao_eleitoral.toLowerCase()?"Eleito":r.situacao_eleitoral.toLowerCase()),a+='<div class="col-md-4">\n  <div class="panel panel-default'+o+'">\n    <a target="_blank" href="'+siteUrl+"/politicos/?cand_id="+r.id_candidatura+'">\n      <div class="panel-body">',r.fb_id?a+="<img src='//graph.facebook.com/v2.6/"+r.fb_id+"/picture?type=large' class='img-responsive img-rounded' alt='"+r.nome_candidato+"' title='"+r.nome_candidato+"'>":a+="<img src='/wp-content/themes/integral/images/default-profile.jpg' class='img-responsive img-circle' alt='"+r.nome_candidato+"' title='"+r.nome_candidato+"'>",a+='      <h4 class="title-name-politic">'+r.nome_urna+'</h4>\n      <ul class="list-unstyled">\n        <li>'+r.sigla_partido.toUpperCase()+"</li>\n        <li><b>"+r.nome_cidade.toUpperCase()+"/"+r.sigla_estado.toUpperCase()+"</b></li>\n        <li><b>Votos:</b>"+r.votos_recebidos.toLowerCase()+"</li>\n        <li><b>Situacao eleitoral:</b>"+i+"</li>\n      </ul>\n    </div>\n  </a>\n</div>",a+=t%3==0?'</div></div><div class="row">':"</div>",t++}),a+="</div>"},e.prototype._desenhaPainelPaginas=function(e){var t,a,r;return r=jQuery('<nav aria-label="Navegacion">'),a=e.first/e.quantity+1,t=jQuery("<ul>",{class:"pagination"}),Array.apply(null,{length:Math.ceil(e.count/e.quantity)}).map(Number.call,Number).forEach(function(e){var r,o,i,n;return n=e+1,o=n===a?"active":"",i=jQuery("<li>",{class:o}),n===a?r=jQuery("<a>",{text:n}):(r=jQuery("<a>",{text:n,href:"#"})).on("click",function(){return requisitaDados(n)}),r.appendTo(i),i.appendTo(t)}),t.appendTo(r),r},e.prototype._desenhaLinkDownload=function(){return jQuery("<a>",{text:"download",href:"#",class:"btn btn-default"}).on("click",downloadAllData)},e.prototype.desenhaDadosFiltrados=function(e){return this.pDadosFiltrados.html(this._desenhaTabelaDados(e.data)),this.pDadosFiltrados.append(this._desenhaPainelPaginas(e.pagination)),this.pDadosFiltrados.append(this._desenhaLinkDownload())},e.prototype._desmarcaAlvo=function(e,t){return jQuery(e).on("click",function(){return jQuery(e+":checked").size()>0?jQuery(t).attr("checked",!1):jQuery(t).attr("checked",!0)}),jQuery(t).on("click",function(){if(jQuery(t).attr("checked"))return jQuery(e+":checked").attr("checked",!1)})},e.prototype.criaFuncoesDesmarque=function(){return this._desmarcaAlvo(".chk-pauta","#filtro_pauta .check-all"),this._desmarcaAlvo(".chk-estado","#filtro_estado .check-all"),this._desmarcaAlvo(".chk-partido","#filtro_partido .check-all"),this._desmarcaAlvo(".chk-genero","#filtro_genero .check-all"),this._desmarcaAlvo(".chk-cor","#filtro_cor .check-all")},e.prototype._createHeader=function(e){return jQuery("<h3>",{text:e,class:"frm-label"})},e.prototype._atualizaFiltroEstados=function(e){var t,a,r,o;for(this.pUf.html(this._createHeader("Estados")),t=jQuery("<ul>",{class:"list-unstyled list-inline"}),r=0,o=e.length;r<o;r++)a=e[r],this.pUf.append(t.append(this._criaElemento("estado_"+a.sigla,"chk-estado",a.sigla,a.sigla)));return this.pUf.append(t.append(this._criaElemento("estado_todos","check-all",null,"Todos")))},e.prototype._atualizaFiltroPartidos=function(e){var t,a,r,o;for(this.pPartidos.html(this._createHeader("Partidos")),t=jQuery("<ul>",{class:"list-unstyled list-inline"}),r=0,o=e.length;r<o;r++)a=e[r],this.pPartidos.append(t.append(this._criaElemento("partido_"+a.sigla,"chk-partido",a.id,a.sigla)));return this.pPartidos.append(t.append(this._criaElemento("partido_todos","check-all",null,"Todos")))},e.prototype._criaElemento=function(e,t,a,r){var o,i;return o=jQuery("<li>"),(i=jQuery("<label>")).append(jQuery("<input>",{type:"checkbox",value:a,id:e,class:t})),i.append(jQuery("<span>",{text:r})),o.append(i),o},e.prototype._linkRacaGenero=function(e){return jQuery("<a>",{href:"/genero-e-raca/"}).append(e)},e.prototype._atualizaFiltroGeneros=function(e){var t,a,r,o,i;for(this.pGeneros.html(this._linkRacaGenero(this._createHeader("Gênero*"))),t=jQuery("<ul>",{class:"list-unstyled list-inline"}),r=0,o=(i=e.filter(function(e){return""!==e.genero.trim()})).length;r<o;r++)a=i[r],this.pGeneros.append(t.append(this._criaElemento("genero_"+a.genero,"chk-genero",a.genero,a.genero)));return this.pGeneros.append(t.append(this._criaElemento("genero_todos","check-all",null,"Todos")))},e.prototype._atualizaFiltroRaca=function(e){var t,a,r,o,i;for(this.pCores.html(this._linkRacaGenero(this._createHeader("Raça*"))),t=jQuery("<ul>",{class:"list-unstyled list-inline"}),r=0,o=(i=e.filter(function(e){return""!==e.cor_tse.trim()})).length;r<o;r++)a=i[r],this.pCores.append(t.append(this._criaElemento("cutis_"+a.cor_tse,"chk-cor",a.cor_tse,a.cor_tse)));return this.pCores.append(t.append(this._criaElemento("cutis_todos","check-all",null,"Todos")))},e.prototype._atualizaFiltroSituacoesEleitorais=function(e){var t,a,r,o,i,n,s,l;for(this.pSituacoes.html(this._createHeader("Situações Eleitorais")),a=jQuery("<ul>",{class:"list-unstyled list-inline"}),l=[],o=0,n=(s=e.filter(function(e){return null!==e.situacao_eleitoral&&""!==e.situacao_eleitoral.trim()})).length;o<n;o++)r=s[o],t=jQuery("<li>"),(i=jQuery("<label>")).append(jQuery("<input>",{type:"checkbox",value:r.situacao_eleitoral,id:"situacao_"+r.situacao_eleitoral.replace(/\s/g,"_"),class:"chk-sit-eleit"})),i.append(r.situacao_eleitoral),t.append(i),l.push(this.pSituacoes.append(a.append(t)));return l},e.prototype.atualizaFiltros=function(e){return this._atualizaFiltroEstados(e.estados),this._atualizaFiltroPartidos(e.partidos),this._atualizaFiltroGeneros(e.generos),this._atualizaFiltroRaca(e.cores),this._atualizaFiltroSituacoesEleitorais(e.situacoes_eleitorais),this.criaFuncoesDesmarque()},e.prototype._marcaEstados=function(e){if(null==e&&(e=[]),e.forEach(function(e){return jQuery("#estado_"+e).attr("checked","checked")}),0===e.length)return jQuery("#estado_todos").attr("checked","checked")},e.prototype._marcaPartidos=function(e){if(null==e&&(e=[]),e.forEach(function(e){return jQuery(".chk-partido[value='"+e+"']").attr("checked","checked")}),0===e.length)return jQuery("#partido_todos").attr("checked","checked")},e.prototype._marcaGenero=function(e){if(null==e&&(e=[]),e.forEach(function(e){return jQuery(".chk-genero[value="+e+"]").attr("checked","checked")}),0===e.length)return jQuery("#genero_todos").attr("checked","checked")},e.prototype._marcaRaca=function(e){if(null==e&&(e=[]),e.forEach(function(e){return jQuery("#cutis_"+e).attr("checked","checked")}),0===e.length)return jQuery("#cutis_todos").attr("checked","checked")},e.prototype._marcaSituacoesEleitorais=function(e){return null==e&&(e=[]),e.forEach(function(e){return jQuery("#situacao_"+e.replace(/\s/g,"_")).attr("checked","checked")})},e.prototype.marcaFiltro=function(e){return this._marcaEstados(e.sigla_estado),this._marcaPartidos(e.id_partido),this._marcaGenero(e.genero),this._marcaRaca(e.cor_tse),this._marcaSituacoesEleitorais(e.situacao_eleitoral),null},e}();